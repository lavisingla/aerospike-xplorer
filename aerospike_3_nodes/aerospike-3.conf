# Aerospike database configuration file for node 3

service {
    user root
    group root
    cluster-name docker
}

logging {
    # Log file must be an absolute path.
    file /var/log/aerospike/aerospike.log {
        context any info
    }
}

network {
    service {
        address any
        port 3000
    }

    heartbeat {
        mode mesh
        port 3002
        interval 150
        timeout 10
        
        # List all other nodes for cluster formation
        mesh-seed-address-port aerospike-1 3002
        mesh-seed-address-port aerospike-2 3002
        mesh-seed-address-port aerospike-3 3002
    }

    fabric {
        port 3001
    }

    info {
        port 3003
    }
}

namespace test {
    replication-factor 2  # Ensures data is replicated across nodes
    default-ttl 30d       # 30 days, use 0 to never expire/evict
    nsup-period 120
    storage-engine device {
        file /opt/aerospike/data/test.dat
        filesize 5G       # 5GB storage limit as requested
        read-page-cache true
    }
}
